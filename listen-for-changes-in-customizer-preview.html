<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Listen for changes in Customizer Preview ! - { LebCit }</title><meta name="description" content="This post is about how to listen for any changes in WordPress Customizer Preview."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://lebcit.github.io/listen-for-changes-in-customizer-preview.html"><link rel="alternate" type="application/atom+xml" href="https://lebcit.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://lebcit.github.io/feed.json"><meta property="og:title" content="Listen for changes in Customizer Preview !"><meta property="og:image" content="https://lebcit.github.io/media/posts/9/chiatto-bunny-by-emiliano-vittoriosi.jpg"><meta property="og:site_name" content="{ LebCit }"><meta property="og:description" content="This post is about how to listen for any changes in WordPress Customizer Preview."><meta property="og:url" content="https://lebcit.github.io/listen-for-changes-in-customizer-preview.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://lebcit.github.io/media/website/favicon-16x16.png" type="image/png"><link rel="stylesheet" href="https://lebcit.github.io/assets/css/style.css?v=c0ee81d862ed28ffef933d680dfdec7d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://lebcit.github.io/listen-for-changes-in-customizer-preview.html"},"headline":"Listen for changes in Customizer Preview !","datePublished":"2020-05-24T09:06","dateModified":"2020-06-13T09:08","image":{"@type":"ImageObject","url":"https://lebcit.github.io/media/posts/9/chiatto-bunny-by-emiliano-vittoriosi.jpg","height":964,"width":640},"description":" This post is about how to listen for any changes in WordPress Customizer Preview. One of the most beautiful functionalities of WordPress is the Customizer, because it allows developers to give a simple way for users to modify themes/plugins appearance and behavior. However, this beauty has it's own code of conduct. Let's scratch it&hellip;","author":{"@type":"Person","name":"LebCit"},"publisher":{"@type":"Organization","name":"LebCit"}}</script><meta name="google-site-verification" content="uvbH-6ck13HtnTSvTxZ22YRcI3wok9_oj7X8Aodexo8"><link rel="manifest" href="/manifest.json"></head><body><div id="layout" class="grid"><a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="main-navigation" aria-label="Main navigation" class="overlay" tabindex="-1"><a href="javascript:void(0)" id="close-button" class="close-button" aria-label="Close menu" title="Close menu">&times;</a><div class="overlay-content"><a href="https://lebcit.github.io/about.html" target="_self">About </a><a href="https://github.com/LebCit" target="_blank">GitHub </a><a href="https://lebcit.github.io/theme/" target="_self">Themes </a><a href="https://lebcit.github.io/plugin/" target="_self">Plugins</a></div></div><div class="sidebar unit-1 unit-lg-2-5" style="background-image:
						url(https://lebcit.github.io/media/posts/9/chiatto-bunny-by-emiliano-vittoriosi.jpg)"><div class="header"><h1 class="brand-title"><a href="https://lebcit.github.io/">{ LebCit }</a></h1><p class="brand-tagline">Autodidactic WordPress Developer.<br>Love to Read, Learn & DIMySelf !</p><nav class="nav"><ul class="nav-list"><li class="nav-item"><a id="menu-button" aria-controls="main-navigation" aria-haspopup="true" tabindex="0" role="button">MENU <span class="menu-icon" aria-hidden="true"><svg version="1.1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 30 30" enable-background="new 0 0 30 30"><rect width="30" height="5"/><rect y="24" width="30" height="5"/><rect y="12" width="30" height="5"/></svg></span></a></li></ul></nav></div></div><div id="content" class="content unit-1 unit-lg-3-5"><main class="single-post"><article><header class="post-header"><h2 class="post-title">Listen for changes in Customizer Preview !</h2><p class="post-meta">Posted on <span class="posted-on"><time datetime="May 24th 2020">May 24th 2020</time></span><br>Tagged <span class="post-category"><a href="https://lebcit.github.io/customizer/">Customizer</a> </span><span class="post-category"><a href="https://lebcit.github.io/development/">Development</a> </span><span class="post-category"><a href="https://lebcit.github.io/tips-and-tricks/">Tips &amp; Tricks</a></span></p></header><div id="post-entry" class="post-content"><p><em>This post is about how to listen for any changes in WordPress Customizer Preview.</em></p><p>One of the most beautiful functionalities of WordPress is the Customizer, because it allows developers to give a simple way for users to modify themes/plugins appearance and behavior.<br>However, this beauty has it's own code of conduct.<br>Let's scratch it a little bit to find out how to listen for changes in the Customizer Preview.</p><p>I always like to assume that the reader maybe a beginner, like I was a long time ago, and explain everything from A to Z, so she/he can follow the tutorial or jump to any part according to her/his experience.</p><p>For simplicity and practice, as usual üòä, I‚Äôll be using an <a href="https://underscores.me/" target="_blank">_s</a> (underscores) generated theme, and call it Customizer Preview üòâ. It‚Äôs a 1 minute process, so don‚Äôt be afraid, type in the <em>Theme Name</em>, download it, and upload it like any other theme under <em>Appearance &gt; Themes &gt; Add New &gt; Upload Theme</em>.<br>Now you‚Äôre all set and we can begin.</p><h2 id="understanding-how-its-related">Understanding how it‚Äôs related</h2><p>In the <a href="https://codex.wordpress.org/Functions_File_Explained" target="_blank">functions.php</a> file, search for <strong>customizer.php</strong>, you‚Äôll find a line like this one :</p><pre class="line-numbers language-html"><code>require get_template_directory() . '/inc/customizer.php';</code></pre><p>So the file <a href="https://codex.wordpress.org/Theme_Customization_API" target="_blank">customizer.php</a> is located in a folder named <em><strong>inc</strong></em> at the root of the theme.<br>If you look inside this file, at the very bottom, you‚Äôll find a little block of code like this one :</p><pre class="line-numbers language-html"><code>/**
 * Binds JS handlers to make Theme Customizer preview reload changes asynchronously.
 */
function customizer_preview_customize_preview_js() {
    wp_enqueue_script( 'customizer-preview-customizer', get_template_directory_uri() . '/js/customizer.js', array( 'customize-preview' ), '20151215', true );
}
add_action( 'customize_preview_init', 'customizer_preview_customize_preview_js' );</code></pre><p>So here, we have a call for another file <strong>customizer.js</strong>, located in a folder named <em><strong>js</strong></em> at the root of the theme.<br>If you take a look inside it, you‚Äôll find a bunch of code allowing us to view the changes we make from the Customizer.</p><h2 id="the-customizers-parts">The Customizer‚Äôs Parts</h2><p>When you open the Customizer, you‚Äôll find yourself in front of screen with two parts :<br>a- the <strong>Customizer Pane</strong> where the <strong>Controls</strong> (like Background Image) of a theme are defined in <strong>customizer.php</strong><br>b- the <strong>Customizer Preview</strong> where the <strong>Settings</strong> defined in <strong>customizer.js</strong> act like a bridge between the Controls and their related Partials.</p><p>A <strong>Partial</strong> is simply a particular part of a theme like the header, the body, the footer, the logo, the site title, the tagline‚Ä¶ and so on.</p><p>As an example, you could have a Control to control the site title color by a Setting linking that color Control to the desired Partial (here the site title).<br>Now, when you change the color Control in the Pane, the defined Setting for this color Control calls the related Partial in the Preview and tells him to change according to the modifications of his Control.</p><p>If you want to dive more into that, you can read about the <a href="https://developer.wordpress.org/themes/customize-api/customizer-objects/" target="_blank">Customizer Objects</a> in the Theme Handbook.</p><h2 id="listening-to-changes">Listening to changes</h2><p>At this point, you understand how the Customizer‚Äôs parts communicate.<br>But what if you need to listen for changes in the Preview ?<br>This will be mostly a need if you are a developer or in the process of becoming one üí™üëç&nbsp;</p><p>Quick quizz. Where do you think the following code will go ?<br>Don‚Äôt look under the code before giving an answer üòÅ&nbsp;</p><pre class="line-numbers language-html"><code>// Listen for any changes in the Customizer Preview.
wp.customize.bind( 'change', function ( setting ) {
    // Target the Setting, let's take background_image as an example.
    if ( 0 === setting.id.indexOf( 'background_image' ) ) {
        // The background is empty by default.
        // So, we begin by listening to a non empty value,
        // to catch the first change when it happens !
        if ((setting._value) != "") {
            console.log('I Now Have A Background üôÇ');
        } else {
            console.log('I Do Not Have A Background üôÅ');
        }
    }
});</code></pre><p>What does this code do ?<br>It listen to any <code>'change'</code> of a defined <code>( setting )</code>.<br>Remember, a Setting is a bridge allowing communication between a Control and it‚Äôs related Partial.<br>So when a communication occurs, a change is ongoing and then done !<br>In the example above, we are listening to any change on the <code>background_image</code>.</p><p>Did you try to look for <code>background_image</code> in the generated theme from underscores ?!<br>If you did, you know by now that it‚Äôs not here ü§î and if you didn‚Äôt, don‚Äôt, you will not find it !<br>Well, I‚Äôve used it as an example to grab your attention on Core Controls/Settings !<br>Some Controls/Settings comes with WordPress by default, they can be modified or removed, but this will be for another article.</p><p>I didn‚Äôt forget, I just delayed it üòà<br>The code above should go inside <strong>customizer.js</strong> between a :</p><pre class="line-numbers language-html"><code>(function ($) { ... YES HERE ... } (jQuery));  </code></pre><p>I really hope that this will be useful.</p></div><div id="author-bio"><p>SYA,<br>LebCit.</p></div><nav id="post-navigation"><a href="https://lebcit.github.io/hide-wordpress-toolbar-with-wp_add_inline_style.html" class="prev-post" rel="prev">&larr; Previous (Hide WordPress Toolbar with wp_add_inline_style) </a><a href="https://lebcit.github.io/change-page-title-dynamically.html" class="next-post" rel="next">Next (Change page title dynamically) &rarr;</a></nav><div id="related-posts"><h3>SOME RELATED POSTS</h3><div><section><a href="https://lebcit.github.io/creating-a-customizer-control-with-javascript.html"><img class="img-responsive" src="https://lebcit.github.io/media/posts/12/screenshot-creating-a-customizer-control-with-javascript.png" loading="lazy" height="626" width="1366" alt=""></a><h4><a href="https://lebcit.github.io/creating-a-customizer-control-with-javascript.html">Creating a Customizer control with JavaScript</a></h4></section><section><a href="https://lebcit.github.io/modifying-wordpress-themes-copyright-from-the-customizer.html"><img class="img-responsive" src="https://lebcit.github.io/media/posts/7/copyright-under-magnifying-glass.jpg" loading="lazy" height="848" width="1280" alt=""></a><h4><a href="https://lebcit.github.io/modifying-wordpress-themes-copyright-from-the-customizer.html">Modifying WordPress theme&#x27;s copyright from the Customizer</a></h4></section></div></div></article></main><footer class="footer unit-1"></footer></div></div><script async src="https://lebcit.github.io/assets/js/scripts.js?v=d8709fa0ed7b5cb59eac2a973692919a"></script></body></html>